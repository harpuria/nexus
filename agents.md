# Codex Agents Guide — NEXUS Project

## 1. Project Overview

**Project Name:** NEXUS

NEXUS is a backend-centric, multi-game operation platform
designed for small to mid-scale casual and idle games.

Its goal is to provide reusable backend capabilities
(authentication, economy, products, coupons, mail, admin)
without rebuilding server infrastructure per game.

---

## 2. Tech Stack

- Java 21
- Spring Boot 3.5.0
- JOOQ 3.19.23
- PostgreSQL 17
- Gradle
- Lombok
- OpenAPI 3.x (Swagger UI)
- JWT-based authentication (User / Admin separated)

---

## 3. Core Design Principles

### 3.1 Backend-Centric Platform
- All business logic MUST reside in the backend.
- Game-specific logic MUST NOT be hardcoded unless explicitly required.

### 3.2 Multi-Tenant First
- All domain data MUST be scoped by `ORG_ID` and/or `GAME_ID`.
- Never assume a single organization or a single game context.

### 3.3 Safety Over Convenience
When uncertain:
- Prefer data integrity over performance.
- Prefer explicit logic over implicit behavior.
- Prefer transactional safety over optimistic assumptions.

---

## 4. Database Conventions

### 4.1 Common Columns
Most tables share the following base columns:
- `CREATED_AT`
- `CREATED_BY`
- `UPDATED_AT`
- `UPDATED_BY`
- `IS_DEL` (logical delete)

⚠️ Physical deletes are NOT allowed unless explicitly instructed.

### 4.2 Logical Delete Rules
- `IS_DEL = 'Y'` indicates inactive or deleted data.
- Queries MUST include `IS_DEL = 'N'` unless for audit/history use.

### 4.3 Transaction Rules
- All write operations MUST be transactional.
- Partial updates without rollback are NOT allowed.

---

## 5. Naming Conventions

### 5.1 Variables & Classes
- Variables: `camelCase`
- Classes: `PascalCase`
- Constants: `UPPER_SNAKE_CASE`

### 5.2 Method Naming
- Format: **action + domain name**
- Domain names start with an uppercase letter.
- Non-CRUD methods MUST clearly express business intent.

(Controller / Service / Repository / DTO / Entity / Result rules
are applied consistently as defined in this document.)

---

## 6. Code Style Guidelines
- Maintain strict responsibility separation between layers.
- Upper layers MUST NOT depend on lower-layer implementations.
- Method names MUST express intent, not implementation.

---

## 7. Priority Rule
- This document > existing code style > Codex general rules
- Conflicting code MUST be updated to follow this document.

---

## 8. Code Comment Rules

### 8.1 No AI Attribution Comments
Do NOT add comments such as:
- "Modified by Codex"
- "Generated by AI"

### 8.2 Intent-Based Comments
Comments SHOULD explain:
- WHY the logic exists
- ASSUMPTIONS it relies on
- What MUST NOT be changed casually

### 8.3 Recommended Keywords
- `WHY:`
- `DO NOT:`
- `ASSUMPTION:`
- `BOUNDARY:`

---

## 9. Testing Instructions
- Focus on Service-layer logic for unit and integration tests.
- Test coverage is encouraged but not enforced at MVP stage.